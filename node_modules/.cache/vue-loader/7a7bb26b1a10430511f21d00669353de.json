{"remainingRequest":"D:\\self\\vue-test\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\self\\vue-test\\src\\components\\dishMatch\\DishMatch.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\self\\vue-test\\src\\components\\dishMatch\\DishMatch.vue","mtime":1542262355534},{"path":"D:\\self\\vue-test\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540522274048},{"path":"D:\\self\\vue-test\\node_modules\\babel-loader\\lib\\index.js","mtime":1540522264468},{"path":"D:\\self\\vue-test\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540522274048},{"path":"D:\\self\\vue-test\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1540522276737}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport API from '../../api';\n\nlet source;\nconst name = {\n  6: '饿了么星选',\n\n  16: '美团外卖',\n  10: '饿了么',\n  21: '京东到家',\n};\nconst column = [\n  {\n    title: '规格',\n    key: 'dishProperty',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n  {\n    title: '名称',\n    key: 'dishName',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n  {\n    title: '匹配状态',\n    key: 'message',\n    render(text) {\n      return text === '成功' ? (\n        <span className=\"greenColor\">{text}</span>\n      ) : (\n        <span className=\"redColor\">{text}</span>\n      );\n    },\n  },\n  {\n    title: '名称',\n    key: 'kryDishName',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n  {\n    title: '规格',\n    key: 'kryDishProperty',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n];\n\nexport default {\n  name: 'dishMatch',\n  data: function() {\n    return {\n      type: '',\n      lastTime: '',\n      columns: column,\n      tableData: [],\n      successNo: '',\n      failNo: '',\n    };\n  },\n  methods: {\n    // 开始匹配\n    mappingStart: function() {\n      API.mapping({\n        brandId: 32299,\n        shopId: 810094332,\n        source,\n        userId: -3001,\n        userName: '贺文莉',\n      })\n        .then(res => {\n          const { result = [], successNo, failNo, code, message } = res.data;\n\n          if (code === 0) {\n            this.tableData = result || [];\n            this.successNo = successNo;\n            this.failNo = failNo;\n          } else {\n            this.$Modal.error({\n              title: '提示',\n              content: message,\n            });\n          }\n        })\n        .catch(e => alert(e));\n    },\n    // 分页\n    changePage: function() {\n      this.tableData = this.mappingStart();\n    },\n  },\n  created: function() {\n    source = location.href.split('=')[1];\n    this.type = name[source];\n  },\n  mounted: function() {\n    API.getLastMappingTime({ shopId: 810094332, brandId: 32299, source }).then(\n      data => {\n        this.lastTime = data.data.result;\n      },\n    );\n  },\n};\n",{"version":3,"sources":["DishMatch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DishMatch.vue","sourceRoot":"src\\components\\dishMatch","sourcesContent":["<template>\n  <div class=\"dishMatch\">\n    <Row class=\"dishMatch_header\">\n          <i-Col span=\"18\" push=\"11\">\n          <Button @click=\"mappingStart\"> \n            开始匹配\n          </Button>\n          <Button to=\"/dishMatchHome\"> \n            返回列表\n          </Button>\n        </i-Col>\n        <i-Col span=\"6\" pull=\"18\">\n          {{ type }}商品映射\n        </i-Col>\n    </Row>\n    <Tabs size=\"small\">\n      <TabPane label=\"匹配信息\">\n        <div class=\"mappingText\">\n          <p>上次匹配时间：{{ lastTime }}</p>\n          <P>\n            当前匹配状态：\n            <span v-if=\"successNo\">\n              匹配失败\n              <span className=\"redColor\">{{ failNo }}</span>\n              笔数据, 匹配成功\n              <span className=\"greenColor\">{{ successNo }}</span>\n              笔数据\n            </span>\n            <span v-else>\n              未匹配\n            </span>\n          </P>\n        </div>\n        <div>\n          <span class=\"mappingTitle\">{{ type }}</span>\n          <span class=\"mappingTitle\">客如云</span>\n        </div>\n        <Table :columns=\"columns\" :data=\"tableData\"></Table>\n        <div style=\"margin: 10px;overflow: hidden\" v-if=\"successNo\">\n          <div style=\"float: right;\">\n              <Page :total=\"30\" :current=\"1\" @on-change=\"changePage\"></Page>\n          </div>\n        </div>\n      </TabPane>\n    </Tabs>\n  </div>\n</template>\n\n<script>\nimport API from '../../api';\n\nlet source;\nconst name = {\n  6: '饿了么星选',\n\n  16: '美团外卖',\n  10: '饿了么',\n  21: '京东到家',\n};\nconst column = [\n  {\n    title: '规格',\n    key: 'dishProperty',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n  {\n    title: '名称',\n    key: 'dishName',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n  {\n    title: '匹配状态',\n    key: 'message',\n    render(text) {\n      return text === '成功' ? (\n        <span className=\"greenColor\">{text}</span>\n      ) : (\n        <span className=\"redColor\">{text}</span>\n      );\n    },\n  },\n  {\n    title: '名称',\n    key: 'kryDishName',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n  {\n    title: '规格',\n    key: 'kryDishProperty',\n    render(text) {\n      return !text ? '-' : text;\n    },\n  },\n];\n\nexport default {\n  name: 'dishMatch',\n  data: function() {\n    return {\n      type: '',\n      lastTime: '',\n      columns: column,\n      tableData: [],\n      successNo: '',\n      failNo: '',\n    };\n  },\n  methods: {\n    // 开始匹配\n    mappingStart: function() {\n      API.mapping({\n        brandId: 32299,\n        shopId: 810094332,\n        source,\n        userId: -3001,\n        userName: '贺文莉',\n      })\n        .then(res => {\n          const { result = [], successNo, failNo, code, message } = res.data;\n\n          if (code === 0) {\n            this.tableData = result || [];\n            this.successNo = successNo;\n            this.failNo = failNo;\n          } else {\n            this.$Modal.error({\n              title: '提示',\n              content: message,\n            });\n          }\n        })\n        .catch(e => alert(e));\n    },\n    // 分页\n    changePage: function() {\n      this.tableData = this.mappingStart();\n    },\n  },\n  created: function() {\n    source = location.href.split('=')[1];\n    this.type = name[source];\n  },\n  mounted: function() {\n    API.getLastMappingTime({ shopId: 810094332, brandId: 32299, source }).then(\n      data => {\n        this.lastTime = data.data.result;\n      },\n    );\n  },\n};\n</script>\n\n<style>\n.dishMatch {\n  width: 90%;\n  margin: 0 auto;\n  line-height: 40px;\n}\n.mappingText {\n  text-align: left;\n}\n\n.mappingTitle {\n  font-size: 30px;\n  margin: 0 20% 0 10%;\n  color: #ccc;\n}\n\n.greenColor {\n  color: green;\n}\n\n.redColor {\n  color: red;\n}\n</style>\n\n\n\n\n"]}]}